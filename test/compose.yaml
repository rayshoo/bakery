---
services:
  test1:
    build:
      context: test/job
      args:
        BUILD_BASE_IMAGE_NAME: golang
        BUILD_BASE_IMAGE_TAG: 1.25.4-alpine3.22
        BASE_IMAGE_NAME: alpine
        BASE_IMAGE_TAG: latest
      x-bake:
        platforms:
        - linux/amd64
        - linux/arm64
    image: ${TEST_IMAGE_NAME}:${TEST_IMAGE_TAG}
  test2:
    build:
      context: test/job
      args:
        BUILD_BASE_IMAGE_NAME: golang
        BUILD_BASE_IMAGE_TAG: 1.25.4-alpine3.22
        BASE_IMAGE_NAME: alpine
        BASE_IMAGE_TAG: latest
      x-bake:
        platforms:
        - linux/amd64
        - linux/arm64
    image: ${TEST_IMAGE_NAME}:${TEST_IMAGE_TAG}-2